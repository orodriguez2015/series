<!-- Content Wrapper. Contains page content -->
<div class="content-wrapper">
 <!-- Content Header (Page header) -->
 <section class="content-header">
   <h1>
     Mis categorías de Youtube
     <small>Listado</small>
   </h1>
   <ol class="breadcrumb">
     <li><a href="/"><i class="fa fa-dashboard"></i> Inicio</a></li>
     <li class="active">Listado de mis categorías de Youtube</li>
   </ol>
 </section>

 <!-- Main content -->
 <section class="content">

 <div class="box">


 <div class="box-body">
   <div class="alert alert-warning" role="alert" id="alert" style="display:none"></div>
   <table id="example2" class="table table-bordered table-hover">
     <thead>
       <tr>
         <th colspan="2">&nbsp</th>
         <th>Nombre</th>
         <th>Descripción</th>
         <th>Número de vídeos asignados</th>
       </tr>
     </thead>
     <tbody ng-repeat="cat in categorias">
        <tr>
          <td width="40px">
            <img src="/images/pencil2.png" width="18" height="18" alt="Editar" title="Editar" ng-click="loadEditCategoria(cat.id)">
          </td>
          <td width="40px">
            <img src="/images/23_full_trash.png" height="18" width="18" alt="Eliminar" title="Eliminar" ng-click="destroyCategoria(cat.id)">
          </td>
          <td>{{cat.nombre}}</td>
          <td>{{cat.descripcion}}</td>
          <td align="center">{{cat.videoYoutubes.length}}</td>
        </tr>

   </tbody>

   </table>
     <br>
     <a ui-sref="app.createcategoriavideo">Alta de categoría</a>
 </div><!-- /.box-body -->
 </div>



 </section><!-- /.content -->
</div><!-- /.content-wrapper -->

<!-- DATA TABLES SCRIPT -->
<script src="/plugins/datatables/jquery.dataTables.min.js" type="text/javascript"></script>
<script src="/plugins/datatables/dataTables.bootstrap.min.js" type="text/javascript"></script>
<!-- SlimScroll -->
<script src="/plugins/slimScroll/jquery.slimscroll.min.js" type="text/javascript"></script>
<!-- FastClick -->
<script src="/plugins/fastclick/fastclick.min.js" type="text/javascript"></script>


<script type="text/javascript">


     $(function () {

       $('#listado').DataTable({
         "paging": true,
         "lengthChange": false,
         "searching": false,
         "ordering": true,
         "info": true,
         "autoWidth": false
       });
     });



   function confirmarEliminar(nombre,idCategoria) { alert("confirmarEliminar nombre: " + nombre + ",idCategoria " + idCategoria);

       var exito = false;

       if(confirm("¿Desea eliminar la categoría " + nombre + "?")==1){
           var url = "/videos/categorias/comprobarExistenciaVideos/" + idCategoria;
           console.log("url: " + url);

           $.ajax({
               url: url,
               type: 'POST',
               dataType: 'json',
               success: function(data) {

                   var exito = false;
                   if(data.status==0) {
                       alert("retornando true");
                       exito = true;
                   }

                   return exito;
               },
               error: function(data) {

                   alert("Error al eliminar la categoría. Intentelo de nuevo: " + data);
                   return false;
               }
           });


       } else return false;
   }

</script>
